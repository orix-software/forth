; ----------------------------------------------------------------------------
; Orix.s:
; ----------------------------------------------------------------------------
;				Compatibilité Orix: exec
; ----------------------------------------------------------------------------

.ifdef With::ORIX

	.ifndef Included::ORIX_INC
		Included::ORIX_INC = 1
		verbose 3, "Ajout compatibilité Orix (exec)"


		; ----------------------------------------------------------------------------
		; Compatibilité Orix: exec
		; ----------------------------------------------------------------------------
		commands_list:
		        .asciiz "forth"

		commands_address:
			.addr ORIGIN

		commands_address_end:

	.else
		; verbose 3, "Ajout vecteurs Orix (exec)"

		; ----------------------------------------------------------------------------
		;
		; ----------------------------------------------------------------------------
		.if * > $fff1
			.error .sprintf("Erreur fichier trop long %d", _err_)
		.endif
		.res $fff1-*, $00
			.byte $01 ; command ROM
			.byte $00 ; Used in the future
			.byte $00 ; Used in the future

		; ----------------------------------------------------------------------------
		; Vecteurs Orix
		; ----------------------------------------------------------------------------
		        .addr   commands_address
		        .addr   commands_list
		        .byte   (commands_address_end - commands_address)>>1

		; ----------------------------------------------------------------------------
		; Vecteurs 6502 & Telemon
		; ----------------------------------------------------------------------------
	        .word   teleforth_signature

		; ----------------------------------------------------------------------------
		; NMI
		; ----------------------------------------------------------------------------
		.addr   ORIGIN
		; ----------------------------------------------------------------------------
		; RESET
		; ----------------------------------------------------------------------------
	        .word   ORIGIN
		; ----------------------------------------------------------------------------
		; IRQ
		; ----------------------------------------------------------------------------
	        .word   virq
	.endif

.endif

